<!DOCTYPE html>
  <html>
  <head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script type="text/javascript" src="./settings.js"></script>
    <script type="text/javascript" src="./map-styles.js"></script>
    <link rel="icon" type="image/x-icon" href="./res/favicon.png">
    <link rel="stylesheet" type="text/css" href="./style.css?v=5" />
    <title>Crowdsourced Map</title>
    <meta property="og:image" content="./res/crowdsourced-geotracker-preview.png">
    <meta property="og:url" content="./">
    <meta name="twitter:card" content="summary_large_image">
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav id="navbar">
      <div class="nav-brand">Crowdsourced Map</div>
      <form id="map-search-form" style="flex:1; display:flex; justify-content:center; align-items:center;" onsubmit="return false;">
        <input id="map-search-box" type="text" placeholder="Search map..." autocomplete="off" style="width: 100%; max-width: 350px; padding: 0.4rem 1rem; border-radius: 1rem; border: 1px solid #ccc; font-size: 1rem;" />
      </form>
      <div class="nav-auth">
        <span id="user-info" class="hidden">
          <span id="username-display"></span>
          <button onclick="logout()" class="nav-btn">Logout</button>
        </span>
        <span id="auth-buttons">
          <button onclick="showLoginModal()" class="nav-btn">Login</button>
          <button onclick="showSignupModal()" class="nav-btn">Sign Up</button>
        </span>
      </div>
    </nav>

    <!-- Authentication Modals -->
    <div id="auth-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close" onclick="closeAuthModal()">&times;</span>
        <div id="login-form" class="auth-form">
          <h2>Login</h2>
          <form onsubmit="login(event)">
            <input type="text" id="login-username" placeholder="Username or Email" required>
            <input type="password" id="login-password" placeholder="Password" required>
            <button type="submit">Login</button>
          </form>
          <p>Don't have an account? <a href="#" onclick="showSignupForm()">Sign up</a></p>
        </div>
        <div id="signup-form" class="auth-form hidden">
          <h2>Sign Up</h2>
          <form onsubmit="signup(event)">
            <input type="text" id="signup-username" placeholder="Username" required>
            <input type="email" id="signup-email" placeholder="Email" required>
            <input type="password" id="signup-password" placeholder="Password (min 6 chars)" required>
            <button type="submit">Sign Up</button>
          </form>
          <p>Already have an account? <a href="#" onclick="showLoginForm()">Login</a></p>
        </div>
      </div>
    </div>

    <div id="map"></div>
    <div id="controls">
      <div class="controls-row">
        <button onclick="decrementHour(24)">&lang;&lang;&lang; -1 day</button>
        <div id="controls-date">-</div>
        <button onclick="incrementHour(24)">+1 day &rang;&rang;&rang;</button>
      </div>
      <div class="controls-row">
        <button onclick="decrementHour(1)">&lang;&lang; -1 hour</button>
        <div id="controls-hour">-</div>
        <button onclick="incrementHour(1)">+1 hour &rang;&rang;</button>
      </div>
      <div class="controls-row hidden-on-mobile">
        <button onclick="decrementHour(0.25)">&lang; -15 m.</button>
        <div id="controls-minute">-</div>
        <button onclick="incrementHour(0.25)">+15 m. &rang;</button>
      </div>
    </div>
    <div id="stats"></div>
    <script type="text/javascript" src="./script.js"></script>
  </body>
</html>
